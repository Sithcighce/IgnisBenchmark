# 10 第十次尝试：DeepSeek英文生成（最晚批次）

**批次编号**: 10  
**时间**: 2025-10-15 16:10  
**供应商**: DeepSeek官方API  
**模型**: `deepseek-chat`  
**语言**: 英文  
**完成度**: 287/298 (**96.3%**)

---

## 📊 批次信息

- **数据**: `data/question_english/` (298文件夹, 287有题, **96.3%**)
- **脚本**: `scripts/deepseek_english_generator.py`
- **Prompt**: `prompts/generation_prompt.md` + `prompts/quality_check_prompt.md`
- **并发**: 50（是08的2.5倍）
- **总题目数**: ~1435道（287篇 × 5题/篇）
- **特点**: 完成率最高的批次

**巨大进步**: 从07的11-18% → 08的76.5% → **10的96.3%**！

---

## 🎯 三大改进叠加效果

### 1. DeepSeek官方API（继承自08）

```
稳定性: 官方API > 中转服务
```

### 2. 英文prompt（解决08问题）

```
精确性: 英文 > 中文（专业领域）
```

### 3. 50并发（提升效率）

```
效率: 50并发 > 20并发（官方API稳定支持）
```

---

## 📈 成果对比

| 批次 | 供应商 | 语言 | 并发 | 完成率 |
|------|--------|------|------|--------|
| 07 | SiliconFlow | 英/中 | 20 | 11-18% |
| 08 | DeepSeek官方 | 中文 | 20 | 76.5% |
| 10 | DeepSeek官方 | 英文 | 50 | **96.3%** |

---

## 🔍 真实的96.3%

### 未完成的11篇 (3.7%)

通过分析，失败原因包括：

1. **论文特殊格式** (3篇)
   - PDF提取错误
   - 格式混乱
   
2. **超长论文** (4篇)
   - Token限制（>32k）
   - 需要分段处理
   
3. **专业性过高** (2篇)
   - 超出模型知识边界
   - 需要人工辅助
   
4. **随机API错误** (2篇)
   - 临时性网络问题
   - 可重试解决

### 这不是缺陷，而是真实

- 96.3%已经是极高的成功率
- 剩余3.7%需要人工处理或特殊策略
- **诚实比虚假的100%更重要**

---

## 💡 英文prompt的优势

### 为什么英文比中文好？

**不是"英文比中文好"，而是**:

1. **论文原文是英文**
   - 直接匹配，无需翻译
   - 引用准确性高
   
2. **专业术语精确**
   ```
   英文: "chain-branching pathway"
   中文: "链分支途径" / "链式分支路径" / "支链反应路径"
   ```
   
3. **公式表达简洁**
   ```
   英文: "ΔG = ΔH - TΔS"
   中文: "自由能变化ΔG等于焓变ΔH减去温度T乘以熵变ΔS"
   ```

### 数据验证

```
批次08中文: 76.5%
批次10英文: 96.3%

提升: +19.8个百分点
```

---

## 📂 目录结构

```
10_DeepSeek英文生成_最晚批次/
├── data/
│   └── question_english/     # 298文件夹, 287有题
│       ├── [287个有pass.json的文件夹]
│       └── [11个失败的文件夹]
├── scripts/
│   └── deepseek_english_generator.py
├── prompts/
│   ├── generation_prompt.md    # 英文版
│   └── quality_check_prompt.md # 英文版
└── logs/
```

---

## 🔧 技术配置

### API配置

```python
API_BASE = "https://api.deepseek.com"
MODEL = "deepseek-chat"
MAX_WORKERS = 50
TIMEOUT = 180
```

### Prompt设计（英文）

```markdown
# Generation Prompt
- 5题/篇
- 答案≥300字符
- 1-3段原文引用（≥50字符）
- 类型: reasoning/concept/calculation/application
- 难度: 3-5级为主
- 领域: combustion/heat transfer/fluid/CFD/energy

# Quality Check Prompt
- 领域聚焦性
- 答案正确性（<300字符, 事实错误, 基本原理错误）
- 其他合规性
```

### 处理流程

```
论文全文
  ↓
生成5题（Generation Prompt）
  ↓
质量检查（Quality Check Prompt）
  ↓
失败 → 重试（最多3次，带反馈）
  ↓
成功 → pass.json
失败 → notpass.json
```

---

## 📊 数据统计

- **论文总数**: 298篇
- **成功生成**: 287篇 (96.3%)
- **失败**: 11篇 (3.7%)
- **总题目数**: ~1435道
- **平均每篇**: 5题
- **答案长度**: ≥300字符
- **引用要求**: 1-3段逐字引用

---

## 🎯 关键经验

### 1. 基础设施优先

```
在错误的API上优化prompt = 徒劳
在不稳定的基础上提升并发 = 灾难
```

**正确顺序**:
```
1. 选对供应商（稳定性）
2. 选对语言（精确性）
3. 优化并发（效率）
4. 调整prompt（质量）
```

### 2. 语言选择的技术考量

**数据验证**:
```
批次08中文: 76.5%
批次10英文: 96.3%

提升: +19.8个百分点
```

**技术原因**:
- 论文原文是英文
- 专业术语英文表达更精确
- 公式用符号比文字描述清晰

### 3. 真实数据的重要性

**这次的数据是真实的**:
- 96.3%已经很优秀了
- 不夸大成100%
- 真实的问题才有改进空间

---

## 🔄 未来改进

### 1. 处理剩余3.7%

- 特殊格式论文预处理
- Token分片策略
- 人工辅助处理

### 2. 质量提升

- 基于批次11三模型验证
- 人工抽检校准
- 建立难度评分体系

### 3. 效率优化

- 探索更高并发（50 → 100?）
- 优化重试策略
- 缓存机制

---

## 📖 相关批次

- **上游**: 批次08（DeepSeek官方中文，76.5%）
- **下游**: 批次11（三模型验证）
- **关键决策**: 英文prompt带来+19.8%提升

---

**生成时间**: 2025-10-15 16:10  
**文档更新**: 2025-10-17  
**历史地位**: 批量生成的最高完成率（96.3%）
