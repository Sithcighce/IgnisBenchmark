（本文档是《智能题库生成与评估系统 - 宏观设计 (PRD)》的技术补充，详细说明了开发所需的具体配置和规范。）

4. 核心功能模块 (Core Functional Modules)
4.1. 题目生成模块 (Question Generation Module)

责任: 一次性批量生成10道高质量、结构化的题目数据。

调用模型: Google Gemini 2.5 Pro (可替换为 DeepSeek 或其他高阶模型以节约成本)。

输入: 一个动态构建的Prompt。该Prompt包含基础指令，并从现有Benchmark错题库 (benchmark_bank.jsonl) 中随机抽取几道题作为Few-shot示例。

输出: 一个包含10个QuestionUnit JSON对象的列表。

4.2. 模型解题模块 (Answering Module)

责任: 逐一调用本地部署的模型，获取对问题的解答。

调用服务: 本地运行的 LM Studio API 服务。

输入: 从题目生成模块接收到的问题列表，通过任务队列进行串行或小批量处理。

输出: 模型的原始回答文本（字符串）。

并发管理: 可通过配置文件设置并发数（如 concurrency: 1）来控制同时向本地模型发送请求的数量。

4.3. 自动判题模块 (Grading Module)

责任: 逐一对本地模型的回答进行评估。

调用模型: Google Gemini 2.5 Flash。

输入: 原始问题、标准答案、待评估的答案。

输出: GradingResult JSON 对象。

4.4. 数据持久化模块 (Data Persistence Module)

责任: 根据判题结果，将题目数据分别持久化到两个不同的库中。

Benchmark错题库:

用途: 存储被目标模型（如Qwen）判定为错误的题目，作为核心评测基准和未来微调的数据源。

触发条件: 当判题模块返回 is_correct: false 时，系统将创建一个包含原始问题、标准答案、模型错误的回答以及判题理由的完整记录，并将其追加写入到 benchmark_bank.jsonl 文件中。

Validation验证集:

用途: 存储被目标模型判定为正确的题目，用于未来模型的回归测试，确保能力不退化。

触发条件: 当判题模块返回 is_correct: true 时，将原始的 QuestionUnit 对象追加写入到 validation_set.jsonl 文件中。

5. 数据结构 (Data Structures)
5.1. 题目生成单元 (QuestionUnit)
这是题目生成模块的输出，也是流程中的基础数据单元。

{
  "question_id": "str",
  "topic": "str",
  "difficulty": "int",
  "type": "str",
  "question_text": "str",
  "standard_answer": "str",
  "generation_model": "str", 
  "creation_timestamp": "str"
}

5.2. 判题结果单元 (GradingResult)
这是自动判题模块的输出。

{
  "is_correct": "bool",
  "score": "float",
  "reasoning": "str"
}

5.3. Benchmark错题库条目 (BenchmarkEntry)
这是最终存入 benchmark_bank.jsonl 的数据结构，它包含了问题本身以及模型的错误尝试。

{
  "question_data": {
    "question_id": "str",
    "topic": "str",
    "difficulty": "int",
    "type": "str",
    "question_text": "str",
    "standard_answer": "str",
    "generation_model": "str", 
    "creation_timestamp": "str"
  },
  "failed_attempt": {
    "model_name": "str",
    "candidate_answer": "str",
    "grading_result": {
      "is_correct": false,
      "score": "float",
      "reasoning": "str"
    }
  }
}
