# 项目文档结构说明

## 📁 docs/ 文件夹组织结构

### 📂 docs/user_requirements/ - 用户写的文件，必须绝对遵守
- **宏观设计.md** - 用户原始需求和系统设计文档
- **实现细节.md** - 用户指定的技术实现细节和规范
- **开发准则.md** - 用户制定的开发规则，必须严格遵守
- **高质量题目示例.md** - 用户提供的5道高质量题目示例

⚠️ **重要**: 这些文件是用户原创，包含系统的核心需求和约束，开发时必须严格遵守，不得违背。

### 📂 docs/prompts/ - 系统生成的Prompt文件
- **生成题Prompt.md** - 题目生成的prompt模板
- **判题Prompt.md** - 自动判题的prompt模板  
- **解题Prompt.md** - 模型解题的prompt模板

🔧 **说明**: 这些prompt由系统根据用户需求生成，用于LLM调用。

### 📂 docs/system_generated/ - 系统生成的文档
- **PROJECT_STRUCTURE.md** - 本文件，项目结构说明
- 其他系统生成的文档和报告

## 🎯 关键设计决策记录

### Gemini过载问题解决方案
1. **降低批量大小**: batch_size: 10 → 3，减少单次API调用负载
2. **增加token限制**: 
   - 题目生成: max_tokens=8192 (支持长思考过程)
   - 判题模块: max_tokens=4096 (支持详细理由)  
   - 解题模块: max_tokens=-1 (无限制，避免截断)
3. **优化并发控制**: 串行处理，避免API过载

### LM Studio截断问题解决
- **根本原因**: max_tokens=1000导致1000token后强制截断
- **解决方案**: max_tokens=-1，允许完整输出
- **并发优化**: concurrency=1，避免本地模型过载

### Prompt管理架构
- **分离原则**: 用户文档与系统生成文件严格分离
- **路径管理**: PromptManager使用专门的./docs/prompts/路径
- **版本控制**: 只追踪seed文件，运行时数据被.gitignore

## 📊 当前系统状态
- ✅ 使用Gemini 2.5 Flash (严格遵守用户要求)
- ✅ 5道seed题目正确加载
- ✅ token截断问题已修复
- ✅ 文档结构重新组织
- ✅ 过载问题通过批量优化解决